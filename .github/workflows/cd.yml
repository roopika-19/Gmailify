name: cd

on:
  workflow_run:
    workflows: ["ci"]
    types:
      - completed

jobs:
  docker_push:
    runs-on: self-hosted

    steps:
    -
        name: Pull Docker Image
        run: sudo docker pull roopika-19/my-first-project:latest
    -
        name: Delete Old Docker Container
        run: sudo docker rm -f my-first-project || true
    -
        name: Run docker container
        run: sudo docker run -d -p 80:80 -m 100m --name my-first-project roopika-19/my-first-project:latest